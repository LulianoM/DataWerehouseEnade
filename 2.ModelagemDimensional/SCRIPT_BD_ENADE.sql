-- MySQL Script generated by MySQL Workbench
-- Tue Nov 23 17:17:38 2021
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema DW_ENADE
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema DW_ENADE
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `DW_ENADE` DEFAULT CHARACTER SET utf8 ;
USE `DW_ENADE` ;

-- -----------------------------------------------------
-- Table `DW_ENADE`.`instituicao`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `DW_ENADE`.`instituicao` (
  `CO_IES` INT NOT NULL,
  `CO_CATEGAD` INT NULL,
  `CO_ORGACAD` INT NULL,
  `CO_CURSO` INT NULL,
  PRIMARY KEY (`CO_IES`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `DW_ENADE`.`info_estudante`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `DW_ENADE`.`info_estudante` (
  `NU_IDADE` INT NOT NULL,
  `TP_SEXO` VARCHAR(45) NULL,
  `ANO_IN_GRAD` INT NULL,
  `ANO_FIM_EM` INT NULL,
  `CO_TURNO_GRADUCAO` INT NULL,
  `TP_INSCRICAO_ADM` INT NULL,
  `TP_INSCRICAO` INT NULL,
  `ESTADO_CIVIL` VARCHAR(45) NULL,
  `RAÇA` VARCHAR(45) NULL,
  `NACIONALIDADE` VARCHAR(45) NULL,
  PRIMARY KEY (`NU_IDADE`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `DW_ENADE`.`localidade`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `DW_ENADE`.`localidade` (
  `CO_MUNIC_CURSO` INT NOT NULL,
  `CO_UF_CURSO` INT NULL,
  `CO_REGIÃO_CURSO` INT NULL,
  `nome_munic` VARCHAR(45) NULL,
  `UF_munic` VARCHAR(45) NULL,
  PRIMARY KEY (`CO_MUNIC_CURSO`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `DW_ENADE`.`curso`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `DW_ENADE`.`curso` (
  `CO_CURSO` INT NOT NULL,
  `CO_GRUPO` INT NULL,
  `CO_MODALIDADE` INT NULL,
  PRIMARY KEY (`CO_CURSO`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `DW_ENADE`.`tipo_presenca`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `DW_ENADE`.`tipo_presenca` (
  `TP_PRES` INT NULL,
  `TP_PR_GER` INT NULL,
  `TP_PR_OB_FG` INT NULL,
  `TP_PR_DI_FG` INT NULL,
  `TP_PR_OB_CE` INT NULL,
  `TP_PR_DI_CE` INT NULL,
  PRIMARY KEY (`TP_PRES`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `DW_ENADE`.`avaliacão_FG`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `DW_ENADE`.`avaliacão_FG` (
  `NU_ITEM_OFG` INT NOT NULL,
  `NU_ITEM_OFG_Z` INT NULL,
  `NU_ITEM_OFG_X` INT NULL,
  `NU_ITEM_OFG_N` INT NULL,
  `DS_VT_GAB_OFG_ORIG` VARCHAR(45) NULL,
  `DS_VT_GAB_OFG_FIN` VARCHAR(45) NULL,
  `DS_VT_ESC_OFG` VARCHAR(45) NULL,
  `DS_VT_ACE_OFG` VARCHAR(45) NULL,
  PRIMARY KEY (`NU_ITEM_OFG`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `DW_ENADE`.`avaliacao_CE`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `DW_ENADE`.`avaliacao_CE` (
  `NU_ITEM_OCE` INT NOT NULL,
  `NU_ITEM_OCE_Z` INT NULL,
  `NU_ITEM_OCE_X` INT NULL,
  `NU_ITEM_OCE_N` INT NULL,
  `DS_VT_GAB_OCE_ORIG` VARCHAR(45) NULL,
  `DS_VT_GAB_OCE_FIN` VARCHAR(45) NULL,
  `DS_VT_ESC_OCE` VARCHAR(45) NULL,
  `DS_VT_ACE_OCE` VARCHAR(45) NULL,
  PRIMARY KEY (`NU_ITEM_OCE`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `DW_ENADE`.`percepcao_prova`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `DW_ENADE`.`percepcao_prova` (
  `tempo_gasto` VARCHAR(45) NOT NULL,
  `Grau_FG` VARCHAR(45) NULL,
  `Grau_CE` VARCHAR(45) NULL,
  `Extensao_Prova` VARCHAR(45) NULL,
  `Enunciado_FD` VARCHAR(45) NULL,
  `Enunciado_CE` VARCHAR(45) NULL,
  PRIMARY KEY (`tempo_gasto`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `DW_ENADE`.`notas_fg`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `DW_ENADE`.`notas_fg` (
  `NT_FG` INT NOT NULL,
  `NT_OBJ_FG` INT NULL,
  `NT_DIS_FG` INT NULL,
  `NT_FG_D1` INT NULL,
  `NT_FG_D1_PT` INT NULL,
  `NT_FG_D1_CT` INT NULL,
  `NT_FG_D2` INT NULL,
  `NT_FG_D2_PT` INT NULL,
  `NT_FG_D2_CT` INT NULL,
  PRIMARY KEY (`NT_FG`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `DW_ENADE`.`notas_CE`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `DW_ENADE`.`notas_CE` (
  `NT_CE` INT NOT NULL,
  `NT_OBJ_CE` INT NULL,
  `NT_DIS_CE` INT NULL,
  `NT_CE_D1` INT NULL,
  `NT_CE_D2` INT NULL,
  `NT_CE_D3` INT NULL,
  PRIMARY KEY (`NT_CE`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `DW_ENADE`.`tabela_fatos`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `DW_ENADE`.`tabela_fatos` (
  `NU_ANO` INT NOT NULL,
  `NOTA_GERAL` INT NULL,
  `instituicao_CO_IES` INT NOT NULL,
  `curso_CO_CURSO` INT NOT NULL,
  `localidade_CO_MUNIC_CURSO` INT NOT NULL,
  `tipo_presenca_TP_PRES` INT NOT NULL,
  `notas_fg_NT_FG` INT NOT NULL,
  `notas_CE_NT_CE` INT NOT NULL,
  `avaliacão_FG_NU_ITEM_OFG` INT NOT NULL,
  `avaliacao_CE_NU_ITEM_OCE` INT NOT NULL,
  `info_estudante_NU_IDADE` INT NOT NULL,
  `percepcao_prova_tempo_gasto` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`NU_ANO`, `instituicao_CO_IES`, `curso_CO_CURSO`, `localidade_CO_MUNIC_CURSO`, `tipo_presenca_TP_PRES`, `notas_fg_NT_FG`, `notas_CE_NT_CE`, `avaliacão_FG_NU_ITEM_OFG`, `avaliacao_CE_NU_ITEM_OCE`, `info_estudante_NU_IDADE`, `percepcao_prova_tempo_gasto`),
  INDEX `fk_tabela_fatos_instituicao1_idx` (`instituicao_CO_IES` ASC) VISIBLE,
  INDEX `fk_tabela_fatos_curso1_idx` (`curso_CO_CURSO` ASC) VISIBLE,
  INDEX `fk_tabela_fatos_localidade1_idx` (`localidade_CO_MUNIC_CURSO` ASC) VISIBLE,
  INDEX `fk_tabela_fatos_tipo_presenca1_idx` (`tipo_presenca_TP_PRES` ASC) VISIBLE,
  INDEX `fk_tabela_fatos_notas_fg1_idx` (`notas_fg_NT_FG` ASC) VISIBLE,
  INDEX `fk_tabela_fatos_notas_CE1_idx` (`notas_CE_NT_CE` ASC) VISIBLE,
  INDEX `fk_tabela_fatos_avaliacão_FG1_idx` (`avaliacão_FG_NU_ITEM_OFG` ASC) VISIBLE,
  INDEX `fk_tabela_fatos_avaliacao_CE1_idx` (`avaliacao_CE_NU_ITEM_OCE` ASC) VISIBLE,
  INDEX `fk_tabela_fatos_info_estudante1_idx` (`info_estudante_NU_IDADE` ASC) VISIBLE,
  INDEX `fk_tabela_fatos_percepcao_prova1_idx` (`percepcao_prova_tempo_gasto` ASC) VISIBLE,
  CONSTRAINT `fk_tabela_fatos_instituicao1`
    FOREIGN KEY (`instituicao_CO_IES`)
    REFERENCES `DW_ENADE`.`instituicao` (`CO_IES`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_tabela_fatos_curso1`
    FOREIGN KEY (`curso_CO_CURSO`)
    REFERENCES `DW_ENADE`.`curso` (`CO_CURSO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_tabela_fatos_localidade1`
    FOREIGN KEY (`localidade_CO_MUNIC_CURSO`)
    REFERENCES `DW_ENADE`.`localidade` (`CO_MUNIC_CURSO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_tabela_fatos_tipo_presenca1`
    FOREIGN KEY (`tipo_presenca_TP_PRES`)
    REFERENCES `DW_ENADE`.`tipo_presenca` (`TP_PRES`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_tabela_fatos_notas_fg1`
    FOREIGN KEY (`notas_fg_NT_FG`)
    REFERENCES `DW_ENADE`.`notas_fg` (`NT_FG`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_tabela_fatos_notas_CE1`
    FOREIGN KEY (`notas_CE_NT_CE`)
    REFERENCES `DW_ENADE`.`notas_CE` (`NT_CE`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_tabela_fatos_avaliacão_FG1`
    FOREIGN KEY (`avaliacão_FG_NU_ITEM_OFG`)
    REFERENCES `DW_ENADE`.`avaliacão_FG` (`NU_ITEM_OFG`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_tabela_fatos_avaliacao_CE1`
    FOREIGN KEY (`avaliacao_CE_NU_ITEM_OCE`)
    REFERENCES `DW_ENADE`.`avaliacao_CE` (`NU_ITEM_OCE`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_tabela_fatos_info_estudante1`
    FOREIGN KEY (`info_estudante_NU_IDADE`)
    REFERENCES `DW_ENADE`.`info_estudante` (`NU_IDADE`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_tabela_fatos_percepcao_prova1`
    FOREIGN KEY (`percepcao_prova_tempo_gasto`)
    REFERENCES `DW_ENADE`.`percepcao_prova` (`tempo_gasto`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
